[build]
builder = "DOCKERFILE"
dockerfilePath = "apps/api/Dockerfile"
# IMPORTANT: Build context must be the repository root for monorepo workspace dependencies
watchPaths = ["apps/api/**", "packages/db/**", "packages/shared/**", "packages/astrology/**"]

[deploy]
# Use Dockerfile CMD instead (runs dist/index.js)
# Railway will use the CMD from Dockerfile
healthcheckPath = "/health"
healthcheckTimeout = 100
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10
